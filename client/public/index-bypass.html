<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EasyCashFlows - Gestione Flussi Finanziari</title>
    <style>
      body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script>
      // COMPLETE HMR BYPASS - ZERO VITE INTERFERENCE
      console.log('[BYPASS] Starting completely independent React setup...');
      
      // Block ALL HMR functionality
      window.$RefreshReg$ = () => () => {};
      window.$RefreshSig$ = () => (type) => type;
      window.__vite_plugin_react_preamble_installed__ = true;
      
      // Mock RefreshRuntime completely
      window.RefreshRuntime = {
        injectIntoGlobalHook: () => console.log('[BYPASS] RefreshRuntime blocked'),
        register: () => console.log('[BYPASS] RefreshRuntime register blocked')
      };
    </script>
    <script type="module">
      // Use local React without Vite processing
      const { createElement } = await import('/@fs' + new URL('../node_modules/react/index.js', import.meta.url).pathname);
      const { createRoot } = await import('/@fs' + new URL('../node_modules/react-dom/client.js', import.meta.url).pathname);
      
      const React = { createElement };
      
      console.log('[BYPASS] React loaded directly:', typeof React);
      
      // Ultra-simple app
      function App() {
        return React.createElement('div', {
          style: {
            padding: '20px',
            minHeight: '100vh',
            backgroundColor: '#f0f0f0',
            fontFamily: 'Arial, sans-serif'
          }
        }, [
          React.createElement('h1', { 
            key: 'title',
            style: { color: '#2563eb', marginBottom: '20px' }
          }, '🏦 EasyCashFlows - Direct Load Test'),
          React.createElement('p', { 
            key: 'text',
            style: { fontSize: '18px', marginBottom: '20px' }
          }, 'Se vedi questo, il bypass HMR funziona!'),
          React.createElement('button', {
            key: 'button',
            onClick: () => alert('React funziona senza HMR!'),
            style: {
              padding: '10px 20px',
              fontSize: '16px',
              backgroundColor: '#2563eb',
              color: 'white',
              border: 'none',
              borderRadius: '5px',
              cursor: 'pointer'
            }
          }, 'Test Bypass'),
          React.createElement('div', {
            key: 'status',
            style: { marginTop: '20px', fontSize: '14px', color: '#666' }
          }, [
            React.createElement('p', { key: 'time' }, 'Timestamp: ' + new Date().toLocaleTimeString()),
            React.createElement('p', { key: 'status' }, 'Status: Bypass HMR attivo'),
            React.createElement('a', {
              key: 'back',
              href: '/',
              style: { color: '#2563eb', textDecoration: 'underline' }
            }, 'Torna alla versione normale')
          ])
        ]);
      }
      
      const container = document.getElementById('root');
      if (container) {
        console.log('[BYPASS] Creating root...');
        const root = createRoot(container);
        console.log('[BYPASS] Rendering app...');
        root.render(React.createElement(App));
        console.log('[BYPASS] ✅ App rendered successfully');
      } else {
        console.error('[BYPASS] Root not found');
      }
    </script>
  </body>
</html>